<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram WebApp Demo</title>
    <style>
        /* Add your CSS styles here */
    </style>
</head>
<body>
    <div id="webview_data_status" class="status_need"></div>
    <input type="text" id="text_field" placeholder="Enter text">
    <button id="btn_status" onclick="DemoApp.sendText(false)">Send Text</button>
    <button id="btn_expand" onclick="DemoApp.expand()">Expand</button>
    <button id="btn_close" onclick="DemoApp.close()">Close</button>
    <!-- Add more HTML elements as needed for your UI -->

    <script>
        const DemoApp = {
            initData: Telegram.WebApp.initData || '',
            initDataUnsafe: Telegram.WebApp.initDataUnsafe || {},
            MainButton: Telegram.WebApp.MainButton,

            init(options) {
                document.body.style.visibility = '';
                Telegram.WebApp.ready();
                Telegram.WebApp.MainButton.setParams({
                    text: 'CLOSE WEBVIEW',
                    is_visible: true
                }).onClick(DemoApp.close);
            },

            expand() {
                Telegram.WebApp.expand();
            },

            close() {
                Telegram.WebApp.close();
            },

            // Implement your other functions and methods here
            
            // ... Your other functions ...

            apiRequest(method, data, onCallback) {
                // Your API request implementation
            }
        };

        // Additional components

        const DemoAppMenu = {
            init() {
                DemoApp.init();
                document.body.classList.add('gray');
                Telegram.WebApp.setHeaderColor('secondary_bg_color');
            }
        };

        const DemoAppInitData = {
            init() {
                DemoApp.init();
                Telegram.WebApp.onEvent('themeChanged', function() {
                    document.getElementById('theme_data').innerHTML = JSON.stringify(Telegram.WebApp.themeParams, null, 2);
                });
                document.getElementById('webview_data').innerHTML = JSON.stringify(DemoApp.initDataUnsafe, null, 2);
                document.getElementById('theme_data').innerHTML = JSON.stringify(Telegram.WebApp.themeParams, null, 2);
                DemoApp.checkInitData();
            }
        };

        const DemoAppViewport = {
            init() {
                DemoApp.init();
                Telegram.WebApp.onEvent('viewportChanged', DemoAppViewport.setData);
                DemoAppViewport.setData();
            },
            setData() {
                document.querySelector('.viewport-border')
                    .setAttribute('text', window.innerWidth + ' x ' + round(Telegram.WebApp.viewportHeight, 2))
                document.querySelector('.viewport-stable_border')
                    .setAttribute('text', window.innerWidth + ' x ' + round(Telegram.WebApp.viewportStableHeight, 2) +
                        ' | is_expanded: ' + (Telegram.WebApp.isExpanded ? 'true' : 'false'));
            }
        };

        function byteLength(str) {
            // Implementation for byte length calculation
        }

        function round(val, d) {
            // Implementation for rounding numbers
        }
    </script>

    <script>
        // Call the specific component's init() function when the page is ready
        window.addEventListener('load', function() {
            DemoAppMenu.init();
            // Or DemoAppInitData.init();
            // Or DemoAppViewport.init();
            // Call the appropriate init() based on your needs
        });
    </script>
</body>
</html>
